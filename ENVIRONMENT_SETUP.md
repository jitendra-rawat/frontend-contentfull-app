# Environment Setup Guide

This guide explains how to manage different environments (development and production) for your Contentful app.

## 🏗️ **Environment Configurations**

### **Development Environment (localhost)**
- **URL**: `http://localhost:3000/editor`
- **Use case**: Local development and testing
- **App ID**: `layout-editor-dev`

### **Production Environment (Vercel)**
- **URL**: `https://contentfulll-app.vercel.app/editor`
- **Use case**: Live Contentful integration
- **App ID**: `5uMF9vbxAHC29sHFQkVi9N`

## 🚀 **How to Switch Environments**

### **For Development (localhost)**
```bash
npm run contentful:setup:dev
```
This will:
- Copy `contentful-app.dev.json` to `contentful-app.json`
- Show you the localhost URL to use in Contentful

### **For Production (Vercel)**
```bash
npm run contentful:setup:prod
```
This will:
- Copy `contentful-app.prod.json` to `contentful-app.json`
- Show you the Vercel URL to use in Contentful

## 📋 **Contentful App Installation Steps**

### **Step 1: Choose Your Environment**
```bash
# For development
npm run contentful:setup:dev

# For production
npm run contentful:setup:prod
```

### **Step 2: Install in Contentful**
1. Go to **Contentful** → **Apps**
2. Click **"Add app"** → **"Custom app"**
3. Enter the details:
   - **App Name**: `Layout Editor` (or `Layout Editor (Development)` for dev)
   - **App URL**: Use the URL shown by the setup command
   - **App ID**: Will be auto-filled from the config
4. Click **Install**

### **Step 3: Assign to Field**
1. Go to **Content Model** → **Landing Page** → **layoutConfig**
2. Go to **Appearance** tab
3. Select your app as the widget
4. Save

## 🔄 **Workflow Examples**

### **Development Workflow**
```bash
# 1. Switch to development config
npm run contentful:setup:dev

# 2. Start local development server
npm run dev

# 3. Install app in Contentful with localhost URL
# 4. Test your changes locally
# 5. Deploy to production when ready
git add . && git commit -m "Your changes" && git push

# 6. Switch to production config
npm run contentful:setup:prod

# 7. Update app URL in Contentful to production URL
```

### **Production Workflow**
```bash
# 1. Switch to production config
npm run contentful:setup:prod

# 2. Deploy changes
git add . && git commit -m "Production changes" && git push

# 3. Update app in Contentful (if needed)
# Go to Apps → Manage apps → Edit → Update URL
```

## 📁 **File Structure**
```
contentful-app/
├── contentful-app.json          # Active configuration (auto-generated)
├── contentful-app.dev.json      # Development configuration
├── contentful-app.prod.json     # Production configuration
├── ENVIRONMENT_SETUP.md         # This guide
└── ...
```

## 🎯 **Best Practices**

1. **Always use the setup commands** instead of manually editing `contentful-app.json`
2. **Test in development first** before deploying to production
3. **Keep both environments in sync** - update both configs when making changes
4. **Use descriptive app names** to distinguish between environments
5. **Document any environment-specific settings**

## 🆘 **Troubleshooting**

### **App not loading in Contentful**
- Check that you're using the correct URL for your environment
- Verify the app is properly installed and assigned to the field
- Check browser console for errors

### **Wrong environment loaded**
- Run the correct setup command: `npm run contentful:setup:dev` or `npm run contentful:setup:prod`
- Check the current `contentful-app.json` content

### **URL not accessible**
- For development: Make sure `npm run dev` is running
- For production: Check that Vercel deployment is successful

## 📝 **Notes**

- The `contentful-app.json` file is automatically generated by the setup commands
- Never manually edit `contentful-app.json` - always use the setup commands
- Each environment can have its own app installation in Contentful
- You can have both development and production apps installed simultaneously 